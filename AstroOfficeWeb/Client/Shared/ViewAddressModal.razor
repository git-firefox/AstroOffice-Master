@using AstroOfficeWeb.Client.Services
@using AstroShared.DTOs
@using MudBlazor

@inject IJSRuntime JSRuntime
@inject ProductService ProductService
@inject StateContainerService StateContainerService

<div @ref="ER_ViewAddressModal" class="modal fade confirmation-modal" id="staticBackdrop" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="staticBackdropLabel">@Title</h5>
                @if (Addresses != null && Addresses.Any())
                {
                    <button type="button" class="btn btn-secondary" @onclick="OnClick_BtnAddAddress"> Add address </button>
                }
            </div>
            <div class="modal-body">
                <div class="container-fluid">

                    <div class="row">
                        @if (Addresses == null)
                        {
                            <div class="col-md-6">
                                <div class="border p-3 rounded mb-3 mb-md-0">
                                    <MudSkeleton Width="30%" Height="42px;" />

                                    <div class="float-end d-inline">
                                        <a href="#"><i class="fas fa-edit text-muted font-20"></i></a>
                                    </div>
                                    <MudSkeleton Width="30%" Height="42px;" />
                                    <MudSkeleton SkeletonType="SkeletonType.Rectangle" Height="250px" />
                                </div>
                            </div>
                        }
                        else if (Addresses.Any())
                        {
                            foreach (var address in Addresses)
                            {
                                <div class="col-md-6">
                                    <div class="border p-3 rounded mb-3 mb-md-0">
                                        <div class="form-check form-check-inline font-16">
                                            <input class="form-check-input" type="radio" name="AddressGroup" id="address-radio-@address.Sno">
                                            <label class="form-check-label" for="address-radio-@address.Sno">@address.AddressType</label>
                                        </div>

                                        <div class="float-end d-inline">
                                            <a href="javascript:void(0)" @onclick="() => OnClick_BtnEditAddress(address)"><i class="fas fa-edit text-muted font-20"></i></a>
                                        </div>

                                        <h5 class="mt-3">@(address.FullName)</h5>

                                        <p class="mb-1"><span class="fw-semibold me-2">Address:</span> @address.AddressLine1</p>
                                        <p class="mb-1"><span class="fw-semibold me-2">Phone:</span> @address.PhoneNumber</p>
                                        <p class="mb-1"><span class="fw-semibold me-2">City:</span> @address.City</p>
                                        <p class="mb-1"><span class="fw-semibold me-2">State:</span> @address.State</p>
                                        <p class="mb-0"><span class="fw-semibold me-2">Zip Code:</span> @address.ZipCode</p>
                                    </div>
                                </div>
                            }
                        }
                        else
                        {
                            <div class="col-md-12 text-center mt-5">
                                <div class="alert alert-info" role="alert">
                                    <p>No addresses available.</p>
                                    <hr>
                                    <p class="mb-0">Click the button below to add a new address.</p>
                                </div>
                                <button class="btn btn-primary btn-lg" @onclick="OnClick_BtnAddAddress">
                                    <i class="fas fa-map-marker-alt me-2"></i>Add Address
                                </button>
                            </div>
                        }
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal" @onclick="() => OnConfirmationChange(false)"> Close </button>
                @if (Addresses != null && Addresses.Any())
                {
                    <button type="button" class="btn btn-custom" @onclick="() => OnConfirmationChange(true)">Use this address</button>
                }
            </div>
        </div>
    </div>
</div>
