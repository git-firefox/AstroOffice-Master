@page "/manage-categories"
@* @inject ProductService ProductService
@inject NavigationManager NavigationManager
@inject StateContainerService StateContainerService
@inject IDialogService DialogService
@inject IJSRuntime JSRuntime

<ContainerFluid HeaderTitle="Manage Orders">
    <Header>       
        <MudButton OnClick="Onclick_AddMetaData" Class="btn-custom">Add Category</MudButton>
    </Header>
    <ChildContent>
        <MudDataGrid T="CategoryDialoge" Items="@categoryList" SortMode="SortMode.Multiple" Filterable="true" QuickFilter="@_quickFilter">
            <ToolBarContent>
                <MudTextField @bind-Value="_searchString" Placeholder="Search" Adornment="Adornment.Start" Immediate="true"
                              AdornmentIcon="@Icons.Material.Filled.Search" IconSize="Size.Medium" Class="mt-0"></MudTextField>
            </ToolBarContent>
            <NoRecordsContent>
                <MudText Typo="Typo.h5" Class="mud-text-secondary mt-16 mb-16">No data to display</MudText>
            </NoRecordsContent>
            <Columns>
              
                <PropertyColumn Property="x=> x.Title" Title="Category">
                    <CellTemplate>
                        <table>
                            <tr>
                                <td>
                                    <img class="img-thumbnail" src="@context.Item.ImageUrl" height="50" width="50" />
                                 
                                </td>
                                <td>
                                    <MudText>
                                        @(context.Item.Title)
                                    </MudText>
                                    @if (!string.IsNullOrEmpty(context.Item.Descriptions))
                                    {
                                        <MudText>
                                            @(new MarkupString(context.Item.Descriptions))
                                        </MudText>
                                    }
                                </td>
                            </tr>
                        </table>
                    </CellTemplate>
                </PropertyColumn>
                <PropertyColumn Property="x => x.TotalProducts" Title="Total Products" />
                <PropertyColumn Property="x => x.AddedDate" Title="Added Date" />
                <PropertyColumn Property="x => x.LastModifiedDate" Title="Last Modified Date" />
                <TemplateColumn Filterable="false" Sortable="false" CellClass="mud-table-cell">
                    <CellTemplate>
                        <MudIconButton Size="@Size.Small" Icon="@Icons.Material.Outlined.Edit" OnClick="()=> OnClick_CategoryEdit(context.Item)" />
                        <MudIconButton Size="@Size.Small" Icon="@Icons.Material.Outlined.Delete" OnClick="() => OnClick_DeleteCategory(context.Item)" />
                    </CellTemplate>
                </TemplateColumn>
            </Columns>
            <PagerContent>
                <MudDataGridPager T="CategoryDialoge" />
            </PagerContent>
        </MudDataGrid>
    </ChildContent>
</ContainerFluid>

 *@



<ContainerFluid HeaderTitle="Manage category">
    <Header>
        @if (isLoadedCategory)
        {

            <MudButton OnClick="MCategories.Onclick_AddMetaData" Class="btn-custom">Add Category</MudButton>
        }
    </Header>
        <ChildContent>
        <AstroOfficeWeb.Components.ProductComponents.ManageCategories @ref=MCategories IsCategoryLoaded="CategoryLoaded"></AstroOfficeWeb.Components.ProductComponents.ManageCategories>
        </ChildContent>
    </ContainerFluid>




@code {
    // [CascadingParameter]
    // public CategoryDialoge CategoryDialoge { get; set; } = new();
    AstroOfficeWeb.Components.ProductComponents.ManageCategories MCategories = null!;
    bool isLoadedCategory = false;
    private void CategoryLoaded(bool isLoaded)
    {
        isLoadedCategory = isLoaded;
    }

}