@using Microsoft.AspNetCore.Components.Routing
@inject NavigationManager Navigation

<header>
    <nav class="border-bottom navbar navbar-expand-lg">
        <div class="container-fluid">
            <div class="d-flex align-items-center">
                <a href="/" class="navbar-brand m-0 text-light fw-bold brand link-light">
                    <img src="logos/logo.png" alt="" width="50">
                    <span class="brand-text">Divya Astro Ashram</span>
                </a>
            </div>
            <div class="d-flex align-items-center">
                <div class="d-none d-lg-block">
                    <ul class="d-flex m-0 list-unstyled">
                        <AuthorizeView>
                            <Authorized>
                                @if (context.User.IsInRole(ApplicationConst.Role_Admin) || context.User.IsInRole(ApplicationConst.Role_User))
                                {
                                    @* Home *@
                                    <li class="nav-item icon-change me-4 pt-2">
                                        <NavLink href="/" class="nav-link text-center p-0">
                                            <div class="d-flex align-items-center overflow-hidden change-width mx-auto">
                                                <img class="icon-height icon-white mx-2" src="icons/magic-ball.png" alt="Home" />
                                                <img class="icon-height mx-2" src="icons/magic-ball-fill.png" alt="Home" />
                                            </div>
                                            <div class="small-font text-light">Home</div>
                                        </NavLink>
                                    </li>

                                    @* Top Up *@
                                    <li class="nav-item icon-change me-4 pt-2">
                                        <NavLink href="/token-recharge" class="nav-link text-center p-0">
                                            <div class="d-flex align-items-center overflow-hidden change-width mx-auto">
                                                <img class="icon-height icon-white mx-2" src="icons/top-up.png" alt="Top Up" />
                                                <img class="icon-height mx-2" src="icons/top-up-fill.png" alt="Top Up" />
                                            </div>
                                            <div class="small-font text-light">Top Up</div>
                                        </NavLink>
                                    </li>
                                }

                                @if (context.User.IsInRole(ApplicationConst.Role_User))
                                {
                                    @* Shopping *@
                                    <li class="nav-item icon-change me-4 pt-2">
                                        <NavLink href="/products" class="nav-link text-center p-0">
                                            <div class="d-flex align-items-center overflow-hidden change-width mx-auto">
                                                <img class="icon-height icon-white mx-2" src="icons/online-shopping.png" alt="Shopping" />
                                                <img class="icon-height mx-2" src="icons/online-shopping-fill.png" alt="Shopping" />
                                            </div>
                                            <div class="small-font text-light">Shopping</div>
                                        </NavLink>
                                    </li>

                                    @* Cart *@
                                    <li class="nav-item icon-change me-4 pt-2">
                                        <NavLink href="/product-cart" class="nav-link text-center p-0">
                                            <div class="d-flex align-items-center overflow-hidden change-width mx-auto">
                                                <img class="icon-height icon-white mx-2" src="icons/shopping-cart.png" alt="Cart" />
                                                <img class="icon-height mx-2" src="icons/shopping-cart-fill.png" alt="Cart" />
                                            </div>
                                            <div class="small-font text-light">Cart</div>
                                        </NavLink>
                                    </li>

                                    @* Wishlist *@
                                    <li class="nav-item icon-change me-3 pt-2">
                                        <NavLink href="/user-wishlist" class="nav-link text-center p-0">
                                            <div class="d-flex align-items-center overflow-hidden change-width mx-auto">
                                                <img class="icon-height icon-white mx-2" src="icons/wishlist.png" alt="Wishlist" />
                                                <img class="icon-height mx-2" src="icons/wishlist-fill.png" alt="Wishlist" />
                                            </div>
                                            <div class="small-font text-light">Wishlist</div>
                                        </NavLink>
                                    </li>
                                }

                                @if (context.User.IsInRole(ApplicationConst.Role_Admin))
                                {
                                    @* Manage Users *@
                                    <li class="nav-item icon-change me-3 pt-2">
                                        <NavLink href="/users" class="nav-link text-center p-0">
                                            <div class="d-flex align-items-center overflow-hidden change-width mx-auto">
                                                <img class="icon-height icon-white mx-2" src="icons/management.png" alt="Manage Users" />
                                                <img class="icon-height mx-2" src="icons/management-fill.png" alt="Manage Users" />
                                            </div>
                                            <div class="small-font text-light">Manage Users</div>
                                        </NavLink>
                                    </li>
                                }

                                @if (context.User.IsInRole(ApplicationConst.Role_Admin) || context.User.IsInRole(ApplicationConst.Role_ProductManager))
                                {
                                    @* Manage Products *@
                                    <li class="nav-item icon-change me-3 pt-2">
                                        <NavLink href="/manage-products" class="nav-link text-center p-0">
                                            <div class="d-flex align-items-center overflow-hidden change-width mx-auto">
                                                <img class="icon-height icon-white mx-2" src="icons/inventory.png" alt="Manage Products" />
                                                <img class="icon-height mx-2" src="icons/inventory-fill.png" alt="Manage Products" />
                                            </div>
                                            <div class="small-font text-light">Manage Products</div>
                                        </NavLink>
                                    </li>


                                    @* Manage Categories *@
                                    <li class="nav-item icon-change me-3 pt-2">
                                        <NavLink href="/manage-categories" class="nav-link text-center p-0">
                                            <div class="d-flex align-items-center overflow-hidden change-width mx-auto">
                                                <img class="icon-height icon-white mx-2" src="icons/categorization.png" alt=" Manage Categories" />
                                                <img class="icon-height mx-2" src="icons/categorization-fill.png" alt=" Manage Categories" />
                                            </div>
                                            <div class="small-font text-light"> Manage Categories</div>
                                        </NavLink>
                                    </li>
                                }

                                @if (context.User.IsInRole(ApplicationConst.Role_Admin))
                                {
                                    @* Manage Orders *@
                                    <li class="nav-item icon-change me-3 pt-2">
                                        <NavLink href="/manage-orders" class="nav-link text-center p-0">
                                            <div class="d-flex align-items-center overflow-hidden change-width mx-auto">
                                                <img class="icon-height icon-white mx-2" src="icons/order.png" alt="Manage Orders" />
                                                <img class="icon-height mx-2" src="icons/order.png" alt="Manage Orders" />
                                            </div>
                                            <div class="small-font text-light">Manage Orders</div>
                                        </NavLink>
                                    </li>
                                }

                            </Authorized>
                        </AuthorizeView>
                    </ul>
                </div>

                <AuthorizeView>
                    <NotAuthorized>
                        @* Sign In *@
                        <button id="nav-login-btn" class="btn btn-sm m-sm-2 m-1 bg-primary text-white rounded-5 px-sm-3 px-2" @onclick=OnClick_BtnSignIn>
                            Sign In
                            <img class="d-none d-lg-inline-block icon-height" src="icons/signin.png" alt="box-arrow" />
                        </button>
                    </NotAuthorized>
                </AuthorizeView>

                @* Mobile View Dropdown *@
                <AuthorizeView Roles="@ApplicationConst.Role_User">
                    <NotAuthorized>
                        <div class="dropdown d-block d-md-none nav-profile-menu-item">
                            <a class="" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                <img class="ms-2 icon-white" height="25" src="icons/dots.png" alt="grid-3x3" />
                            </a>
                            <ul class="dropdown-menu dropdown-menu-end dropdown-menu-dark" aria-labelledby="navbarDarkDropdownMenuLink">
                                <li><a class="dropdown-item" href="/viewed-kundalis">Viewed Kundalis</a></li>
                                <li><a class="dropdown-item" href="/token-recharge">Token Recharge</a></li>
                                <li><a class="dropdown-item" href="/saved-kundalis">Saved Kundalis</a></li>
                                <li>
                                    <hr class="dropdown-divider">
                                </li>
                                <li><a class="dropdown-item" href="#">Logout</a></li>
                            </ul>
                        </div>
                    </NotAuthorized>
                </AuthorizeView>

                @* Web View MD Dropdown *@
                <AuthorizeView>
                    <Authorized>
                        @if (!context.User.IsInRole(ApplicationConst.Role_ProductManager))
                        {
                            <div class="collapse navbar-collapse nav-profile-menu-item">
                                <ul class="navbar-nav">
                                    <li class="nav-item dropdown">
                                        <NavLink class="nav-link" href="/" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                            <img src="https://github.com/mdo.png" alt="mdo" width="32" height="32" class="rounded-circle">
                                        </NavLink>
                                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDarkDropdownMenuLink">
                                            <li><NavLink class="dropdown-item" href="/viewed-kundalis"><img class="icon-height mx-2" src="icons/tarot-fill.png" alt="Viewed Kundali" />Viewed Kundali</NavLink></li>
                                            <li><NavLink class="dropdown-item" href="/saved-kundalis"><img class="icon-height mx-2" src="icons/magic-ball-fill.png" alt="Saved Kundali" />Saved Kundali</NavLink></li>
                                            <li><NavLink class="dropdown-item" href="/token-recharge"><img class="icon-height mx-2" src="icons/transaction.png" alt="Transaction History" />Transaction History</NavLink></li>

                                            @if (context.User.IsInRole(ApplicationConst.Role_User))
                                            {
                                                <li><hr class="dropdown-divider"></li>
                                                <li><NavLink class="dropdown-item" href="/my-orders"><img class="icon-height mx-2" src="icons/order.png" alt="My Orders" />My Orders</NavLink></li>
                                            }
                                            <li><hr class="dropdown-divider"></li>
                                            <li><NavLink class="dropdown-item" href="/logout"><img class="icon-height mx-2" src="icons/log-out.png" alt="Logout" />Logout</NavLink></li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                        }
                        else
                        {
                            <NavLink href="/logout" class="nav-link text-center p-0">
                                <div class="d-flex align-items-center overflow-hidden change-width mx-auto">
                                    <img class="icon-height icon-white mx-2" src="icons/log-out.png" alt="Logout" />
                                    <img class="icon-height mx-2" src="icons/log-out.png" alt="Logout" />
                                </div>
                                <div class="small-font text-light"> Logout </div>
                            </NavLink>
                        }
                    </Authorized>
                </AuthorizeView>
            </div>
        </div>
    </nav>
</header>
@code {
    private void OnClick_BtnSignIn(MouseEventArgs args)
    {
        Navigation.NavigateTo("/login");
    }
}